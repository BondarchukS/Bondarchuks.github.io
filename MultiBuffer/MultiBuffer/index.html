<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Мультибуфер</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
</head>
<body>
<style>
    td{
        cursor:pointer;
        min-height:100px;

    }
    td:nth-of-type(2):hover{
        color:red;
    }
    .data-time tr td:first-child{
        width:80px;
    }
    span{
        display:block;
        max-height: 100px;
        overflow:auto;
    }
</style>
    <table width="100%" border="1">
        <thead>
            <tr>
                <th>
                    Время
                </th>
                <th>
                    Содержание
                </th>
            </tr>
        </thead>
        <tbody class="data-time" style="text-align:center;" >

        </tbody>
    </table>
<script>
    var gui = new require('nw.gui');
    var text = '',array=[],clipboard = '',per = 1;
    topWindow();

        Array.prototype.in_array = function(p_val) {
            for(var i = 0, l = this.length; i < l; i++)  {
                if(this[i] == p_val) {
                    return true;
                }
            }
            return false;
        };

    function times() {
        var date = new Date();
        var H = date.getHours() < 10 ? "0"+date.getHours() : date.getHours() ,
            I =date.getMinutes() < 10 ? "0"+date.getMinutes() : date.getMinutes(),
            S =date.getSeconds() < 10 ? "0"+date.getSeconds() : date.getSeconds();
        return H+' : '+ I + ' : '+S;

    }
    function topWindow(){
        var win = gui.Window.get();
        if(per === 0){
            win.hide();
            per++;
        }
        else{
            win.show();
            win.setAlwaysOnTop (true);
            per--;
        }
    }

        var option = {
        key : "Ctrl+D",
            active: function(){
                topWindow();
            }, failed: function(){
                alert('Мы где то ошиблись!');
            }
        };
    var shortcut = new gui.Shortcut(option);
    gui.App.registerGlobalHotKey(shortcut);

    var id  = setInterval(function(){
        clipboard = gui.Clipboard.get();
        text = clipboard.get('text');

        if(!array.in_array(text.trim())){
            if(text.trim() !== '') {
                var time = times();
                $(".data-time").append('<tr><td>' + time + '</td><td><span>' + $("<div>").text(text).html().trim() + '</span></td></tr>');
                array.push(text.trim());
                $(".data-time tr td:nth-of-type(2) span").on('click', function(){
                    clipboard.set($(this).text(), 'text');
                    return false;
                });
            }
        }

    },1000);

</script>
</body>
</html>